"use strict";(self.webpackChunkhexadash_tailwind=self.webpackChunkhexadash_tailwind||[]).push([[7354],{9062(e,a,t){t.r(a),t.d(a,{BtnGroup:()=>c,Button:()=>d});var s=t(89379),r=t(80045),n=t(65043),o=t(74280),l=t(70579);const i=["type","shape","icon","size","outlined","ghost","transparented","raised","squared","color","social","load","children"];function d(e){const{type:a,shape:t,icon:d,size:c,outlined:m,ghost:u,transparented:x,raised:h,squared:p,color:g,social:f,load:y,children:v}=e,b=(0,r.A)(e,i),[j,w]=(0,n.useState)({loading:!1});return(0,l.jsx)(o.ButtonStyled,(0,s.A)((0,s.A)({squared:p,outlined:m?1:0,ghost:u,transparent:x?1:0,raised:h?1:0,data:a,size:c,shape:t,type:a,icon:d,color:g,social:f,onClick:y&&(()=>{w({loading:!0})}),loading:j.loading},b),{},{children:v}))}function c(e){let{children:a}=e;return(0,l.jsx)(o.ButtonStyledGroup,{children:a})}d.defaultProps={type:"default"}},11951(e,a,t){t.d(a,{A:()=>i});var s=t(89379),r=t(65043);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-792 72h752v120H136V232zm752 560H136V440h752v352zm-237-64h165c4.4 0 8-3.6 8-8v-72c0-4.4-3.6-8-8-8H651c-4.4 0-8 3.6-8 8v72c0 4.4 3.6 8 8 8z"}}]},name:"credit-card",theme:"outlined"};var o=t(51835),l=function(e,a){return r.createElement(o.A,(0,s.A)((0,s.A)({},e),{},{ref:a,icon:n}))};const i=r.forwardRef(l)},14789(e,a,t){t.r(a),t.d(a,{clearPlan:()=>j,createSubscription:()=>y,resetSubscription:()=>w,selectPlan:()=>b,verifyPayment:()=>v});var s=t(89379),r=t(16856),n=t.n(r),o=t(71012),l=t(453),i=t(78328);const{createSubscriptionBegin:d,createSubscriptionSuccess:c,createSubscriptionErr:m,verifyPaymentBegin:u,verifyPaymentSuccess:x,verifyPaymentErr:h,setSelectedPlan:p,clearSelectedPlan:g,resetSubscriptionState:f}=o.default,y=(e,a)=>async t=>{t(d());try{const r=await i.DataService.post("/create-subscription/",{plan_id:e});if(!0===r.data.status){const e=!1===r.data.data.payment_required,n=(0,s.A)({subscription_id:r.data.data.subscription_id||"FREE_PLAN",subscription_status:r.data.data.subscription_status||"active",razorpay_key:r.data.data.razorpay_key||null,isFreePlan:e},r.data.data);t(c(n)),a&&a(n)}else t(m(r.data.message||"Failed to create subscription"))}catch(u){var r,n,o,l;console.error("Create Subscription Failed:",u);const e=(null===(r=u.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||(null===(o=u.response)||void 0===o||null===(l=o.data)||void 0===l?void 0:l.error)||"Something went wrong";t(m(e))}},v=(e,a)=>async t=>{t(u());try{const s=await i.DataService.post("/verify-payment/",e);!0===s.data.status?(t(x(s.data)),n().set("hasSubscription","true"),t(l.default.setHasSubscription(!0)),a&&a(s.data)):t(h(s.data.message||"Payment verification failed"))}catch(c){var s,r,o,d;console.error("Verify Payment Failed:",c);const e=(null===(s=c.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.message)||(null===(o=c.response)||void 0===o||null===(d=o.data)||void 0===d?void 0:d.error)||"Payment verification failed";t(h(e))}},b=e=>a=>{a(p(e))},j=()=>e=>{e(g())},w=()=>e=>{e(f())}},24228(e,a,t){t.d(a,{A:()=>i});var s=t(89379),r=t(65043);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M866.9 169.9L527.1 54.1C523 52.7 517.5 52 512 52s-11 .7-15.1 2.1L157.1 169.9c-8.3 2.8-15.1 12.4-15.1 21.2v482.4c0 8.8 5.7 20.4 12.6 25.9L499.3 968c3.5 2.7 8 4.1 12.6 4.1s9.2-1.4 12.6-4.1l344.7-268.6c6.9-5.4 12.6-17 12.6-25.9V191.1c.2-8.8-6.6-18.3-14.9-21.2zM810 654.3L512 886.5 214 654.3V226.7l298-101.6 298 101.6v427.6zm-405.8-201c-3-4.1-7.8-6.6-13-6.6H336c-6.5 0-10.3 7.4-6.5 12.7l126.4 174a16.1 16.1 0 0026 0l212.6-292.7c3.8-5.3 0-12.7-6.5-12.7h-55.2c-5.1 0-10 2.5-13 6.6L468.9 542.4l-64.7-89.1z"}}]},name:"safety-certificate",theme:"outlined"};var o=t(51835),l=function(e,a){return r.createElement(o.A,(0,s.A)((0,s.A)({},e),{},{ref:a,icon:n}))};const i=r.forwardRef(l)},48060(e,a,t){t.d(a,{A:()=>o});var s=t(89379),r="".concat("accept acceptCharset accessKey action allowFullScreen allowTransparency\n    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge\n    charSet checked classID className colSpan cols content contentEditable contextMenu\n    controls coords crossOrigin data dateTime default defer dir disabled download draggable\n    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder\n    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity\n    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media\n    mediaGroup method min minLength multiple muted name noValidate nonce open\n    optimum pattern placeholder poster preload radioGroup readOnly rel required\n    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected\n    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style\n    summary tabIndex target title type useMap value width wmode wrap"," ").concat("onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown\n    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick\n    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown\n    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel\n    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough\n    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata\n    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError").split(/[\s\n]+/);function n(e,a){return 0===e.indexOf(a)}function o(e){var a,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a=!1===t?{aria:!0,data:!0,attr:!0}:!0===t?{aria:!0}:(0,s.A)({},t);var o={};return Object.keys(e).forEach(function(t){(a.aria&&("role"===t||n(t,"aria-"))||a.data&&n(t,"data-")||a.attr&&r.includes(t))&&(o[t]=e[t])}),o}},74280(e,a,t){t.r(a),t.d(a,{ButtonStyled:()=>d,ButtonStyledGroup:()=>c});var s,r,n=t(57528),o=t(89421),l=t(94574);const i=o.A.Group,d=(0,l.Ay)(o.A)(s||(s=(0,n.A)(["\n    \n"]))),c=(0,l.Ay)(i)(r||(r=(0,n.A)(["\n    \n"])))},79855(e,a,t){t.r(a),t.d(a,{default:()=>j});var s=t(65043),r=t(22166),n=t(35475),o=t(73216),l=t(33946),i=t(13159),d=t(5397),c=t(95920),m=t(46237),u=t(89967),x=t(11951),h=t(95859),p=t(98617),g=t(24228),f=t(17962),y=t(9062),v=t(14789),b=t(70579);const j=function(){var e,a,t,j;const w=(0,r.wA)(),N=(0,o.Zp)(),S=(0,o.zy)(),A=(0,r.d4)(e=>e.auth.login),P=null===(e=S.state)||void 0===e?void 0:e.plan,{selectedPlan:z,loading:C,error:k}=(0,r.d4)(e=>e.subscription),E=s.useMemo(()=>{try{const e=sessionStorage.getItem("selectedPlan");return e?JSON.parse(e):null}catch(e){return null}},[]),_=P||z||E,[M,D]=(0,s.useState)(!1),[T,B]=(0,s.useState)(!1),[L,H]=(0,s.useState)(!1);(0,s.useEffect)(()=>{_?A||(sessionStorage.setItem("selectedPlan",JSON.stringify(_)),N("/auth/login",{state:{redirectTo:"/checkout",plan:_}})):N("/pricing")},[_,A,N]),(0,s.useEffect)(()=>{k&&H(!1)},[k]),(0,s.useEffect)(()=>()=>{w((0,v.resetSubscription)())},[w]);const V=async e=>{var a;if(!await new Promise(e=>{if(window.Razorpay)return void e(!0);const a=document.createElement("script");a.src="https://checkout.razorpay.com/v1/checkout.js",a.onload=()=>e(!0),a.onerror=()=>e(!1),document.body.appendChild(a)}))return alert("Failed to load payment gateway. Please try again."),void H(!1);const t={key:e.razorpay_key,subscription_id:e.subscription_id,name:"TrackMyProfit",description:"".concat((null===_||void 0===_||null===(a=_.badge)||void 0===a?void 0:a.text)||(null===_||void 0===_?void 0:_.name)," Subscription"),handler(e){const a={razorpay_payment_id:e.razorpay_payment_id,razorpay_subscription_id:e.razorpay_subscription_id,razorpay_signature:e.razorpay_signature};w((0,v.verifyPayment)(a,()=>{H(!1),D(!0),w((0,v.clearPlan)()),sessionStorage.removeItem("selectedPlan")}))},prefill:{name:"",email:"",contact:""},theme:{color:"#10B981"},modal:{ondismiss(){H(!1),B(!0)}}};new window.Razorpay(t).open()},F=()=>{null!==_&&void 0!==_&&_.plan_id?(H(!0),w((0,v.createSubscription)(_.plan_id,e=>{e.isFreePlan?(H(!1),D(!0),w((0,v.clearPlan)()),sessionStorage.removeItem("selectedPlan")):V(e)}))):console.error("Plan ID not found")},O=()=>{D(!1),N("/admin/profit/summary")},R=()=>{B(!1),N("/pricing")};return _&&A?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50 font-sans pb-20",children:[(0,b.jsx)("header",{className:"bg-white border-b border-gray-200 shadow-sm sticky top-0 z-50 px-[3%]",children:(0,b.jsxs)("div",{className:"h-20 max-w-7xl mx-auto flex items-center justify-between",children:[(0,b.jsxs)(n.N_,{className:"flex items-center gap-2 cursor-pointer",to:"/",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-400 to-teal-500 rounded-xl flex items-center justify-center",children:(0,b.jsx)(f.D1P,{className:"text-white",size:22})}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900 mb-0",children:"TrackMyProfit"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-emerald-700 bg-emerald-50 px-3 py-2 rounded-full text-xs font-bold border border-emerald-100",children:[(0,b.jsx)(p.A,{}),(0,b.jsx)("span",{className:"min-md:block hidden",children:"SECURE CHECKOUT"})]})]})}),(0,b.jsx)("main",{className:"max-w-6xl mx-auto px-[3%] py-12",children:(0,b.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden grid grid-cols-1 min-lg:grid-cols-2 min-h-[600px] border border-gray-100",children:[(0,b.jsxs)("div",{className:"lg:col-span-5 bg-slate-50 p-4 min-lg:p-10 text-gray-900 relative flex flex-col justify-between border-b lg:border-b-0 lg:border-r border-gray-200",children:[(0,b.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-emerald-500/5 rounded-full blur-[80px] pointer-events-none translate-x-1/2 -translate-y-1/2"}),(0,b.jsxs)("div",{className:"relative z-10",children:[(0,b.jsx)("h2",{className:"text-lg min-md:text-xl font-medium text-gray-900 mb-8",children:"Order Summary"}),(0,b.jsxs)("div",{className:"flex items-baseline gap-1 mb-2",children:[(0,b.jsx)("span",{className:"text-xl min-md:text-2xl font-bold text-gray-500",children:"\u20b9"}),(0,b.jsx)("span",{className:"text-4xl min-md:text-5xl font-extrabold text-gray-900 tracking-tight",children:_.title}),(0,b.jsx)("span",{className:"text-gray-500 font-medium",children:"/mo"})]}),(0,b.jsx)("div",{className:"inline-block px-3 py-1 rounded-md bg-white text-emerald-600 text-sm font-bold border border-gray-200 shadow-sm mb-8",children:(null===(a=_.badge)||void 0===a?void 0:a.text)||"".concat(_.name," Plan")}),(0,b.jsx)("div",{className:"space-y-4",children:null===(t=_.features)||void 0===t?void 0:t.slice(0,5).map((e,a)=>(0,b.jsxs)("div",{className:"flex gap-3 text-sm text-gray-600",children:[(0,b.jsx)(m.A,{className:"text-emerald-500 mt-0.5 shrink-0"}),(0,b.jsx)("span",{children:e})]},a))})]}),(0,b.jsxs)("div",{className:"relative z-10 mt-12 pt-8 border-t border-gray-200",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center text-sm mb-2",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Subtotal"}),(0,b.jsxs)("span",{className:"font-semibold text-gray-900",children:["\u20b9",_.title]})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center text-sm mb-4",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Tax"}),(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:"\u20b90.00"})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center text-lg font-bold",children:[(0,b.jsx)("span",{className:"text-gray-900",children:"Total Due"}),(0,b.jsxs)("span",{className:"text-emerald-600",children:["\u20b9",_.title]})]})]})]}),(0,b.jsx)("div",{className:"lg:col-span-7 p-4 min-lg:p-12 relative",children:(0,b.jsxs)("div",{className:"max-w-md mx-auto h-full flex flex-col justify-center",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h2",{className:"text-xl min-md:text-2xl font-bold text-gray-900 mb-2",children:"Select Payment Method"}),(0,b.jsx)("p",{className:"text-gray-500 text-sm",children:"Choose how you'd like to pay for your subscription."})]}),k&&(0,b.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-start gap-3",children:[(0,b.jsx)(u.A,{className:"text-red-500 mt-0.5"}),(0,b.jsx)("p",{className:"text-red-600 text-sm",children:k})]}),(0,b.jsxs)("div",{className:"space-y-4 mb-8",children:[(0,b.jsxs)("div",{className:"border-2 border-emerald-500 bg-emerald-50/20 p-5 rounded-xl cursor-pointer relative shadow-sm hover:shadow-md transition-all group",children:[(0,b.jsx)("div",{className:"absolute top-4 right-4 w-5 h-5 rounded-full border-2 border-emerald-500 bg-white flex items-center justify-center",children:(0,b.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-emerald-500"})}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-lg bg-emerald-100 flex items-center justify-center text-emerald-600",children:(0,b.jsx)(x.A,{className:"text-2xl"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-bold text-gray-900",children:"Credit / Debit Card"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Secure payment via Razorpay"})]})]})]}),(0,b.jsxs)("div",{className:"border border-gray-200 bg-gray-50 p-5 rounded-xl cursor-not-allowed opacity-60 flex items-center gap-4 grayscale",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-lg bg-gray-200 flex items-center justify-center text-gray-500",children:(0,b.jsx)(h.A,{className:"text-2xl"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-bold text-gray-900",children:"Gift Card / Voucher"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Not available for this plan"})]})]})]}),(0,b.jsx)(y.Button,{type:"primary",size:"large",className:"w-full h-14 text-lg font-bold rounded-xl  bg-gradient-to-r from-emerald-500 to-teal-600  border-0 shadow-lg shadow-emerald-500/30  hover:shadow-emerald-500/50  hover:from-emerald-600 hover:to-teal-700 flex items-center justify-center gap-2  transform transition-all active:scale-[0.99]",onClick:F,loading:C||L,disabled:C||L,children:C||L?"Processing...":(0,b.jsxs)(b.Fragment,{children:["Pay \u20b9",_.title," ",(0,b.jsx)(c.A,{className:"rotate-180"})]})}),(0,b.jsxs)("div",{className:"mt-6 flex items-center justify-center gap-2 text-gray-400 text-xs",children:[(0,b.jsx)(g.A,{className:"text-emerald-500"}),(0,b.jsx)("span",{children:"Payments are SSL encrypted & secured."})]}),(0,b.jsx)("div",{className:"mt-8 pt-8 border-t border-gray-100 text-center",children:(0,b.jsxs)(y.Button,{type:"text",onClick:R,className:"text-gray-500 hover:text-gray-900 font-medium text-sm flex items-center gap-2 mx-auto",children:[(0,b.jsx)(c.A,{})," Choose a different plan"]})})]})})]})})]}),(0,b.jsx)(l.A,{open:M,onCancel:O,footer:null,centered:!0,width:480,className:"payment-success-modal",children:(0,b.jsx)(i.Ay,{status:"success",icon:(0,b.jsx)("div",{className:"w-20 h-20 mx-auto mb-4 bg-emerald-100 rounded-full flex items-center justify-center",children:(0,b.jsx)(m.A,{className:"text-emerald-600 text-4xl"})}),title:(0,b.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:"Payment Successful!"}),subTitle:(0,b.jsxs)("span",{className:"text-gray-500",children:["Welcome to ",(null===_||void 0===_||null===(j=_.badge)||void 0===j?void 0:j.text)||(null===_||void 0===_?void 0:_.name),"! Your subscription is now active."]}),extra:[(0,b.jsx)(y.Button,{type:"primary",size:"large",className:"w-full h-12 rounded-xl border-0 font-bold bg-gradient-to-r from-emerald-500 to-teal-600 shadow-lg shadow-emerald-500/30 hover:shadow-emerald-500/50 transition-all",onClick:O,children:"Go to Dashboard"},"dashboard")]})}),(0,b.jsx)(l.A,{open:T,onCancel:()=>{B(!1)},footer:null,centered:!0,width:480,children:(0,b.jsx)(i.Ay,{status:"warning",icon:(0,b.jsx)("div",{className:"w-20 h-20 mx-auto mb-4 bg-orange-100 rounded-full flex items-center justify-center",children:(0,b.jsx)(u.A,{className:"text-orange-500 text-4xl"})}),title:(0,b.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:"Payment Cancelled"}),subTitle:(0,b.jsx)("span",{className:"text-gray-500",children:"Your payment was not completed. You can try again or choose a different plan."}),extra:[(0,b.jsxs)("div",{className:"flex flex-col gap-3 w-full",children:[(0,b.jsx)(y.Button,{type:"primary",size:"large",className:"w-full h-12 rounded-xl bg-gradient-to-r from-emerald-500 to-teal-600 shadow-lg shadow-emerald-500/30 hover:shadow-emerald-500/50 transition-all font-bold",onClick:()=>{B(!1),F()},loading:C,children:"Try Again"}),(0,b.jsx)(y.Button,{type:"default",size:"large",className:"w-full h-12 rounded-xl font-semibold",onClick:R,children:"Choose Different Plan"})]},"actions")]})})]}):(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:(0,b.jsx)(d.A,{size:"large"})})}},95859(e,a,t){t.d(a,{A:()=>i});var s=t(89379),r=t(65043);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 310H732.4c13.6-21.4 21.6-46.8 21.6-74 0-76.1-61.9-138-138-138-41.4 0-78.7 18.4-104 47.4-25.3-29-62.6-47.4-104-47.4-76.1 0-138 61.9-138 138 0 27.2 7.9 52.6 21.6 74H144c-17.7 0-32 14.3-32 32v200c0 4.4 3.6 8 8 8h40v344c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V550h40c4.4 0 8-3.6 8-8V342c0-17.7-14.3-32-32-32zm-334-74c0-38.6 31.4-70 70-70s70 31.4 70 70-31.4 70-70 70h-70v-70zm-138-70c38.6 0 70 31.4 70 70v70h-70c-38.6 0-70-31.4-70-70s31.4-70 70-70zM180 482V378h298v104H180zm48 68h250v308H228V550zm568 308H546V550h250v308zm48-376H546V378h298v104z"}}]},name:"gift",theme:"outlined"};var o=t(51835),l=function(e,a){return r.createElement(o.A,(0,s.A)((0,s.A)({},e),{},{ref:a,icon:n}))};const i=r.forwardRef(l)},95920(e,a,t){t.d(a,{A:()=>i});var s=t(89379),r=t(65043);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"};var o=t(51835),l=function(e,a){return r.createElement(o.A,(0,s.A)((0,s.A)({},e),{},{ref:a,icon:n}))};const i=r.forwardRef(l)}}]);
//# sourceMappingURL=7354.d5853409.chunk.js.map